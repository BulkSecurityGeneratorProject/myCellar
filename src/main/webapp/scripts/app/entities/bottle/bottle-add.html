
<div ng-include="'scripts/app/entities/country/country-add-modal.html'"></div>
<div ng-include="'scripts/app/entities/appellation/appellation-add-modal.html'"></div>

<div class="panel panel-primary">

    <div class="panel-heading">
        <div class="row">

            <div class="col-sm-6">
                <h4>Ajouter une bouteille</h4>
            </div>

            <div class="col-sm-6 text-right">
                <button class="btn btn-info" ui-sref="bottle()">
                    <span class="glyphicon glyphicon-arrow-left"></span> <span>Revenir à la liste</span>
                </button>
            </div>
        </div>
    </div>

    <div class="panel-body bg-info">
        <form name="editFormBottle" role="form" novalidate ng-submit="save()" show-validation>
            <div class="row">
                <div class="col-xs-9 col-sm-10 form-group">
                    <label>Pays</label>
                    <select class="form-control" name="country"
                            ng-model="country"
                            ng-options="country as country.name for country in countries"
                            ng-change="loadAppellations()">
                    </select>
                </div>
                <div class="col-xs-3 col-sm-2">
                    <button class="btn btn-sm btn-primary" type="button" ng-click="addCountry()"
                            style="margin-top: 27px;">
                        <span class="glyphicon glyphicon-plus"></span> <span>Nouveau</span>
                    </button>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-9 col-sm-10 form-group">
                    <label>Appellation</label>
                    <select class="form-control" name="appellation" ng-disabled="!country || !country.id"
                            ng-model="appellation"
                            ng-options="appellation as appellation.name for appellation in appellations">
                    </select>
                </div>
                <div class="col-xs-3 col-sm-2">
                    <button class="btn btn-sm btn-primary" type="button" ng-click="addAppellation()"
                            style="margin-top: 27px;" ng-disabled="!country || !country.id">
                        <span class="glyphicon glyphicon-plus"></span> <span>Nouveau</span>
                    </button>
                </div>
            </div>

            <div class="form-group">
                <label>Domaine</label>
                <select class="form-control" name="domain" ng-disabled="!appellation"
                        ng-model="domain"
                        ng-options="domain as domain.name for domain in appellation.domains">
                </select>
            </div>

            <div class="form-group">
                <label>Vigneron</label>
                <select class="form-control" name="vineward" ng-disabled="!domain"
                        ng-model="vineward"
                        ng-options="vineward as vineward.name for vineward in domain.vinewards">
                </select>
            </div>

            <div class="form-group">
                <label>Bouteille</label>
                <select class="form-control" name="category" ng-disabled="!vineward"
                        ng-model="bottle.category"
                        ng-options="category as category.name for category in vineward.categorys">
                </select>
            </div>

            <div class="form-group">
                <label>Année</label>
                <input type="number" class="form-control" name="year"
                       ng-model="bottle.year" required ng-change="changeYear()">

                <div ng-show="editForm.year.$invalid">
                    <p class="help-block"
                       ng-show="editForm.year.$error.required">
                        This field is required.
                    </p>
                    <p class="help-block"
                       ng-show="editForm.year.$error.number">
                        This field should be a number.
                    </p>
                </div>
            </div>

            <div class="form-group">
                <label>Prix</label>
                <input type="number" class="form-control" name="price"
                       ng-model="bottle.price" ng-disabled="priceDisabled">
            </div>

            <div class="form-group">
                <label>Nombre</label>
                <input type="number" class="form-control" name="number"
                       ng-model="bottle.number" required>

                <div ng-show="editForm.number.$invalid">
                    <p class="help-block"
                       ng-show="editForm.number.$error.required">
                        This field is required.
                    </p>
                    <p class="help-block"
                       ng-show="editForm.number.$error.number">
                        This field should be a number.
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="clear()">
                    <span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span>Annuler</span>
                </button>
                <button type="submit" ng-disabled="editForm.$invalid" class="btn btn-primary">
                    <span class="glyphicon glyphicon-save"></span>&nbsp;<span>Valider</span>
                </button>
            </div>
        </form>
    </div>
</div>
